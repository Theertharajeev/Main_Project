{% extends 'admin/admin home  page.html' %}

{% block title %}
Change Password
{% endblock %}

{% block body %}
<div class="container mt-4">
  <h3 class="text-center mb-4">Change Password</h3>

  <!-- Change Password Form -->
  <div class="card">
    <div class="card-body">
      <form id="form1" name="form1" method="post" action="/changepassword_POST">

        <!-- Current Password Field -->
        <div class="mb-3 position-relative">
          <label for="currentPassword" class="form-label">Current Password</label>
          <div class="input-group">
            <input type="password" name="textfield" id="currentPassword" class="form-control" required />
            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('currentPassword', this)">
              <i class="fa fa-eye"></i>
            </button>
          </div>
        </div>

        <!-- New Password Field with Validation -->
        <div class="mb-3 position-relative">
          <label for="newPassword" class="form-label">New Password</label>
          <div class="input-group">
            <input type="password" name="textfield2" id="newPassword" class="form-control" required
              pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
              title="Must contain at least 8 characters, including uppercase, lowercase letters, and a number" />
            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('newPassword', this)">
              <i class="fa fa-eye"></i>
            </button>
          </div>
        </div>

        <!-- Confirm Password Field with Validation -->
        <div class="mb-3 position-relative">
          <label for="confirmPassword" class="form-label">Confirm Password</label>
          <div class="input-group">
            <input type="password" name="textfield3" id="confirmPassword" class="form-control" required
              pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
              title="Must contain at least 8 characters, including uppercase, lowercase letters, and a number"
              oninput="this.setCustomValidity(this.value !== document.getElementById('newPassword').value ? 'Passwords do not match.' : '')" />
            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('confirmPassword', this)">
              <i class="fa fa-eye"></i>
            </button>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit" name="Change" class="btn btn-primary">Change Password</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  // Toggle password visibility
  function togglePassword(fieldId, button) {
    const passwordField = document.getElementById(fieldId);
    const icon = button.querySelector('i');

    if (passwordField.type === 'password') {
      passwordField.type = 'text';
      icon.classList.remove('fa-eye');
      icon.classList.add('fa-eye-slash');
    } else {
      passwordField.type = 'password';
      icon.classList.remove('fa-eye-slash');
      icon.classList.add('fa-eye');
    }
  }
</script>
{% endblock %}
