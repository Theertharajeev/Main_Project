{% extends 'yogatrainer/Yoga home.html' %}
{% block title %}
Change Password
{% endblock %}
{% block body %}

<body style="color: white">
    <div class="container">
        <form id="form1" name="form1" method="post" action="/changepasswordd_POST" onsubmit="return validatePasswords()">
            <div class="mb-3">
                <label for="currentPassword" class="form-label" style="color: white">Current Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" name="textfield" id="currentPassword" required />
                </div>
            </div>
            <div class="mb-3">
                <label for="newPassword" class="form-label">New Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" name="textfield2" id="newPassword" pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}" required />
                    <span class="input-group-text" onclick="togglePasswordVisibility('newPassword')">
                        <i class="fa fa-eye" id="newPasswordEye"></i>
                    </span>
                </div>
                <div class="form-text">Minimum 8 characters, including uppercase, lowercase, number, and special character.</div>
            </div>
            <div class="mb-3">
                <label for="confirmPassword" class="form-label">Confirm Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" name="textfield3" id="confirmPassword" required />
                    <span class="input-group-text" onclick="togglePasswordVisibility('confirmPassword')">
                        <i class="fa fa-eye" id="confirmPasswordEye"></i>
                    </span>
                </div>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>

    <script>
        function validatePasswords() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            if (newPassword !== confirmPassword) {
                alert("New Password and Confirm Password do not match.");
                return false; // Prevent form submission
            }
            return true; // Allow form submission
        }

        function togglePasswordVisibility(passwordFieldId) {
            const passwordField = document.getElementById(passwordFieldId);
            const fieldType = passwordField.getAttribute("type") === "password" ? "text" : "password";
            passwordField.setAttribute("type", fieldType);
            const eyeIcon = document.getElementById(passwordFieldId + 'Eye');
            eyeIcon.classList.toggle('fa-eye');
            eyeIcon.classList.toggle('fa-eye-slash');
        }
    </script>

</body>

{% endblock %}
